syntax = "proto3";

package tk.db;

import "common/common.proto";

message Secret {
  bytes secret_bytes = 1;
}

message User {
  string username = 1;
  string password = 2;
  repeated common.Role roles = 3;
}

enum TeamMemberType {
  STUDENT = 0;
  MENTOR = 1;
}

message TeamMember {
  string first_name = 1;
  string last_name = 2;
  TeamMemberType member_type = 3;
  optional string display_name = 4;
  optional string mobile_number = 5;
  optional string discord_username = 6;
}

message RfidTag {
  string team_member_id = 1;
  string tag = 2;
}

message Location {
  string location = 1;
}

message TeamMemberSession {
  string team_member_id = 1;
  string session_id = 2;
  common.Timestamp check_in_time = 3;
  optional common.Timestamp check_out_time = 4;
  bool overtime_notified = 5;
  bool auto_checkout_notified = 6;
}

message Session {
  common.Timestamp start_time = 1;
  common.Timestamp end_time = 2;
  string location_id = 3;
  bool finished = 4;
  bool start_reminder_sent = 5;
  bool end_reminder_sent = 6;
}

message Settings {
  int64 next_session_threshold_secs = 1;
  string discord_bot_token = 2;
  string discord_guild_id = 3;
  string discord_channel_id = 4;
  bool discord_self_link_enabled = 5;
  bool discord_name_sync_enabled = 6;
  int64 discord_start_reminder_mins = 7;
  int64 discord_end_reminder_mins = 8;
  string discord_start_reminder_message = 9;
  string discord_end_reminder_message = 10;
  bool discord_overtime_dm_enabled = 11;
  int64 discord_overtime_dm_mins = 12;
  string discord_overtime_dm_message = 13;
  bool discord_auto_checkout_dm_enabled = 14;
  int64 discord_auto_checkout_dm_mins = 15;
  string discord_auto_checkout_dm_message = 16;
}
