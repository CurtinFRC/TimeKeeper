syntax = "proto3";

package tk.api;

import "common/common.proto";
import "db/db.proto";

message TeamMemberSessionResponse {
  string id = 1;
  db.TeamMemberSession team_member_session = 2;
}

message GetTeamMemberSessionsRequest {}
message GetTeamMemberSessionsResponse {
  repeated TeamMemberSessionResponse team_member_sessions = 1;
}

message StreamTeamMemberSessionsRequest {}
message StreamTeamMemberSessionsResponse {
  repeated TeamMemberSessionResponse team_member_sessions = 1;
  common.SyncType sync_type = 2;
}

message UpdateTeamMemberSessionRequest {
  string id = 1;
  common.Timestamp check_in_time = 2;
  optional common.Timestamp check_out_time = 3;
}
message UpdateTeamMemberSessionResponse {}

message DeleteTeamMemberSessionRequest {
  string id = 1;
}
message DeleteTeamMemberSessionResponse {}

message ImportAttendanceCsvRequest {
  bytes csv_data = 1;
}
message ImportAttendanceCsvResponse {}

service TeamMemberSessionService {
  rpc GetTeamMemberSessions(GetTeamMemberSessionsRequest) returns (GetTeamMemberSessionsResponse);
  rpc StreamTeamMemberSessions(StreamTeamMemberSessionsRequest) returns (stream StreamTeamMemberSessionsResponse);
  rpc UpdateTeamMemberSession(UpdateTeamMemberSessionRequest) returns (UpdateTeamMemberSessionResponse);
  rpc DeleteTeamMemberSession(DeleteTeamMemberSessionRequest) returns (DeleteTeamMemberSessionResponse);
  rpc ImportAttendanceCsv(ImportAttendanceCsvRequest) returns (ImportAttendanceCsvResponse);
}
